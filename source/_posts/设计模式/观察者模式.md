---
title: 观察者模式
categories:
  - 技术笔记
tags:
  - 设计模式
  - Java
date: 2023-02-19 01:19:19
---
> 让你的对象知悉现况
> 针对接口编程不针对实现编程
> 多用组合少用继承

## 观察者模式

指多个对象间存在一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。
又称作`发布-订阅模式`、`模型-视图模式`，它是对象行为型模式。
观察者模式的主要角色如下：
- 抽象主题（Subject）角色：也叫抽象目标类，它提供了一个用于保存观察者对象的聚集类和增加、删除观察者对象的方法，以及通知所有观察者的抽象方法。
- 具体主题（Concrete Subject）角色：也叫具体目标类，它实现抽象目标中的通知方法，当具体主题的内部状态发生改变时，通知所有注册过的观察者对象。
- 抽象观察者（Observer）角色：它是一个抽象类或接口，它包含了一个更新自己的抽象方法，当接到具体主题的更改通知时被调用。
- 具体观察者（Concrete Observer）角色：实现抽象观察者中定义的抽象方法，以便在得到目标的更改通知时更新自身的状态。

## 应用场景

## 举个成熟的🌰
### uml类图
![](/images/observer.png)


![](http://www.plantuml.com/plantuml/uml/jLEnReCm4Dtz5Hw9sl85KHVIhLK7XWvLXmCkmHMsaU-S2gNvzve08bKBf9Ko0U-TtvtVFPHXT5l8KUPMnpOZT7jqDN20JVpSVyk3k95xgmhfwm8OeyBwhCBRRu-LE0erAvVwx1rp7jKSxXG5QkWJ3I-hiKBRFKxpnhBQDWDCqV8G6qLr1Sr3XHhDsIn5XvyKyWg8VZtzWi0bkWqmXADtyZ7ClnxQtykXd0BLkI8PTOqEs3iSmT9hLIXkHgHsIDJMND6Qdj08RQVs-fIKO7POZ2GXFvtnavjUj2XbO6LDghIlW6sNeGErQ7xi1m5befITChlNjtdHn3iNvaci2RO5MUhNU5h2lvqU0lanRlLd72vBlX1pYLz_nl5IdiJi7pYfCEMCk23yVnRz0W00)

```java
package com.observerpattern;
/**
 * @author cuiliu
 */
public interface DisplayElement {
    public void display();
}
```

```commandline
package com.observerpattern;

/**
 * @author cuiliu
 */
public interface Observer {
    public void update(double temperature, double humidity, double pressure);
}
```

```commandline
package com.observerpattern;

/**
 * @author cuiliu
 */
public interface Subject {
    public void registerObserver(Observer o);
    public void removeObserver(Observer o);
    public void notifyObservers();
}
```

