---
title: 服务监控
categories:
  - 微服务
tags:
  - 服务监控
date: 2023-02-25 13:22:20
---
>服务监控是保证生产环境稳定最基础的也是最重要的措施，没有成熟的监控方案微服务化注定是失败的结局。

## 敬畏线上
>线上故障虽迟但到。

但是做好服务的事前监控、容错以及服务降级，是可以尽量减少故障发生的概率以及降低故障所带来的影响。
或者说你的服务发生风险所带来的危害性，可有如下计算：
$$风险的危害性=故障发生的可能性 * 故障发生后的严重性$$

![](source/images/fault.png)

最怕的就是故障突然间的雪崩式爆发，所以啊，一定要对服务建立善的监控体系，尽可能发现故障的征兆，提早预防，做好容错和降级。

### 熔断

### 服务降级

### 限流

## 监控什么

### 性能指标
性能指标：
- ResponseTime - RT：响应时间，用户从客户端发起一个请求开始计算，到客户端接收到服务端的响应结束，整个过程所耗费的时间。
- MaxRT：最大响应时间，指用户发出请求到服务端返回响应的最大时间。
- MinRT：最少响应时间，指用户发出请求到服务端返回响应的最少时间。
- Hits Per Second - HPS：用户每秒点击次数，即每秒向后台发送的请求次数。
- QPS：系统每秒处理查询的次数。
- 99%响应时间 - TOP99：将所有用户的响应时间进行升序排序，取99%的位置。

性能测试关注点：
- CPU使用率
- 内存使用情况
- 吞吐量：每秒钟系统能处理的请求数、任务数。
- 响应时间：服务处理一个请求或者一个任务的耗时。
- 错误率：一批请求中结果出过错的请求所占比例。
